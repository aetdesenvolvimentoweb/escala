generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  userName String @unique
  password String

  @@map("users")
}

model Military {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId
  graduation  String
  rg          Int        @unique
  name        String
  active      Boolean    @default(true)
  garrison    Garrison[] @relation(fields: [garrisonIds], references: [id])
  garrisonIds String[]   @db.ObjectId

  @@map("military")
}

model Vehicle {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId
  name        String     @unique
  garrison    Garrison[] @relation(fields: [garrisonIds], references: [id])
  garrisonIds String[]   @db.ObjectId

  @@map("vehicles")
}

model Garrison {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId
  military    Military[] @relation(fields: [militaryIds], references: [id])
  militaryIds String[]   @db.ObjectId
  vehicles    Vehicle[]  @relation(fields: [vehiclesIds], references: [id])
  vehiclesIds String[]   @db.ObjectId

  @@map("garrisons")
}
